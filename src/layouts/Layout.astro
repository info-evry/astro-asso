---
import '../../design/src/index.css';
import Head from '../../design/src/components/Head.astro';
import MobileNav from '../../design/src/components/MobileNav.astro';
import associationInfo from '../../knowledge/src/association/info.json';

const mobileNavItems = [
  { href: '#a-propos', label: 'À propos', icon: 'info.circle' },
  { href: '#ressources', label: 'Ressources', icon: 'book' },
  { href: '#ndi', label: 'NDI', icon: 'moon.stars' },
];

interface Props {
  title: string;
  description?: string;
  image?: string;
  noindex?: boolean;
}

const {
  title,
  description = "Association des Étudiants en Informatique de l'Université d'Évry Val-d'Essonne",
  image = "og.jpg",
  noindex = false
} = Astro.props;

// Ensure siteUrl has trailing slash for relative URL resolution
const siteUrl = associationInfo.sites.asso.url.replace(/\/?$/, '/');
const canonicalUrl = new URL(Astro.url.pathname, siteUrl).href;
---

<!DOCTYPE html>
<html lang="fr">
<head>
  <Head
    title={title}
    description={description}
    image={image}
    noindex={noindex}
    canonicalUrl={canonicalUrl}
    siteName={associationInfo.name}
    author={associationInfo.fullName}
  />
</head>
<body>
  <slot />

  <MobileNav
    items={mobileNavItems}
    ctaHref="/adhesion"
    ctaLabel="Rejoindre"
    ctaIcon="person.badge.plus"
  />
</body>
</html>

<style is:global>
  @import '../styles/global.css';
</style>
